# 股票交易模拟平台

一个纯前端的股票交易模拟平台，使用 React + TypeScript + Ant Design 构建，提供完整的股票交易体验。

## 📋 项目简介

本项目是一个功能完整的股票交易模拟系统，使用模拟数据进行交易练习。用户可以体验股票买卖、查看实时行情、分析K线图等功能，所有数据均基于模拟算法生成。

## 🛠️ 技术栈

- **框架**: React 18 + TypeScript
- **UI组件库**: Ant Design 5.x
- **图表库**: ECharts 5.x
- **状态管理**: Zustand 4.x
- **构建工具**: Vite 5.x
- **数据处理**: Immer (不可变数据更新)
- **日期处理**: Day.js

## ✨ 核心功能

### 1. 用户系统（模拟）
- ✅ 虚拟资金账户（初始资金：10万元）
- ✅ 用户数据本地存储（localStorage）
- ✅ 实时余额显示

### 2. 股票行情模块
- ✅ **自选股列表**：显示25只模拟股票
- ✅ **股票搜索**：支持按股票代码或名称搜索
- ✅ **实时价格更新**：每秒自动更新股票价格
- ✅ **涨跌幅显示**：实时显示涨跌幅度，绿色表示上涨，红色表示下跌
- ✅ **分时图展示**：显示当日分时价格走势和成交量

### 3. 股票交易模块
- ✅ **股票搜索**：支持代码/名称模糊搜索
- ✅ **买卖操作**：
  - 买入/卖出按钮切换
  - 实时显示当前价格和涨跌幅
  - 可用资金实时显示
- ✅ **交易数量设置**：
  - 手动输入数量（100股起，必须为100的整数倍）
  - 快捷按钮：1/4、1/2、全部
- ✅ **交易计算**：
  - 实时计算交易金额
  - 手续费计算（0.1%）
  - 显示合计金额
- ✅ **交易验证**：
  - 买入时验证资金充足性
  - 卖出时验证持仓数量
  - 数量有效性验证（必须为正数且为100的整数倍）

### 4. 持仓管理模块
- ✅ **持仓列表**：显示当前持有的所有股票
- ✅ **持仓信息**：
  - 股票代码和名称
  - 持仓数量
  - 成本价
  - 当前价格
  - 浮动盈亏（实时计算）
- ✅ **自动成本计算**：多次买入时自动计算平均成本价

### 5. 图表分析模块

#### K线图功能
- ✅ **多种周期**：支持日K线（90天历史数据）
- ✅ **技术指标**：
  - MA5（5日均线）
  - MA10（10日均线）
  - MA20（20日均线）
- ✅ **成交量显示**：底部副图显示成交量柱状图
- ✅ **买卖点标记**：
  - B点（买入点）标记为红色向上三角形
  - S点（卖出点）标记为绿色向下三角形
- ✅ **交互功能**：
  - 缩放功能
  - 十字线提示
  - 数据缩放条

#### 分时图功能
- ✅ **价格曲线**：显示当日价格走势（白色线）
- ✅ **均价线**：显示当日平均价格（黄色线）
- ✅ **成交量**：显示实时成交量柱状图
- ✅ **实时更新**：每秒更新最新数据点
- ✅ **买卖点标记**：在分时图上标记买入和卖出点

### 6. 历史记录模块
- ✅ **交易记录表格**：
  - 显示所有买卖交易记录
  - 包含时间、股票代码、交易方向、价格、数量
  - 支持分页显示
- ✅ **对账单筛选**：
  - 按日期筛选交易记录
  - 使用日期选择器选择特定日期
- ✅ **数据排序**：按时间倒序显示（最新交易在前）

### 7. 实时数据更新
- ✅ **价格波动模拟**：基于算法模拟真实股票价格波动
- ✅ **定时更新**：每秒自动更新所有股票价格
- ✅ **开盘价记录**：记录每日开盘价，用于计算涨跌幅
- ✅ **分时数据生成**：实时生成分时图数据点

## 📁 项目结构

```
src/
├── components/          # 组件目录
│   ├── charts/         # 图表组件
│   │   ├── KLineChart.tsx      # K线图组件
│   │   └── TimeSharingChart.tsx # 分时图组件
│   ├── layout/         # 布局组件
│   │   └── MainLayout.tsx      # 主布局组件
│   └── trade/          # 交易组件
│       ├── TradePanel.tsx      # 交易面板
│       └── PositionList.tsx    # 持仓列表
├── pages/              # 页面组件
│   ├── MarketPage.tsx  # 行情页面
│   ├── TradePage.tsx   # 交易页面
│   └── HistoryPage.tsx # 历史记录页面
├── stores/             # 状态管理
│   └── useStockStore.ts # 股票状态管理（Zustand）
├── types/              # 类型定义
│   └── stock.ts        # 股票相关类型
├── utils/              # 工具函数
│   ├── calculation.ts  # 计算工具函数
│   └── mockData.ts     # 模拟数据生成器
├── App.tsx             # 根组件
├── main.tsx            # 入口文件
└── styles.css          # 全局样式
```

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:5173 查看应用

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 📊 数据说明

本项目使用完全模拟的数据，包括：

- **股票列表**：25只模拟股票，随机生成代码和名称
- **K线数据**：90天的历史K线数据
- **分时数据**：当日的分时价格和成交量数据
- **价格波动**：基于随机算法模拟价格变化

所有数据均在浏览器端生成，无需后端服务器。

## 🎯 主要特性

1. **完整的交易流程**：从股票搜索到买卖执行的完整流程
2. **实时数据更新**：模拟真实市场的实时价格更新
3. **专业图表**：使用ECharts绘制专业的K线图和分时图
4. **数据持久化**：使用localStorage保存用户数据
5. **响应式设计**：适配不同屏幕尺寸
6. **类型安全**：完整的TypeScript类型定义

## 📝 使用说明

1. **查看行情**：在"行情"页面浏览股票列表，点击股票查看分时图
2. **进行交易**：在"交易"页面选择股票，输入数量，点击买入或卖出
3. **查看持仓**：在交易页面底部查看当前持仓和浮动盈亏
4. **查看历史**：在"历史记录"页面查看所有交易记录，可按日期筛选

## 🔧 开发说明

- 状态管理使用 Zustand，配合 Immer 中间件实现不可变数据更新
- 图表使用 ECharts，按需导入以减少打包体积
- 所有计算函数都在 `utils/calculation.ts` 中，便于测试和维护
- 模拟数据生成器在 `utils/mockData.ts` 中，可以调整数据生成策略

## 📄 许可证

MIT License

## 👨‍💻 作者

股票交易模拟平台开发团队

---

**注意**：本项目仅供学习和演示使用，不涉及真实股票交易。
